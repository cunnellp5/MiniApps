import{s as z,n as D,c as A,d as y}from"../chunks/scheduler.CxYgMsxH.js";import{S as C,i as G,e as g,t as j,s as w,r as E,c as b,a as k,b as O,d as u,f as S,g as v,h as m,j as V,u as K,l as _}from"../chunks/index.CIHsrv2y.js";import{e as H}from"../chunks/each.D6YF6ztN.js";import{p as R}from"../chunks/stores.DYFfTm0h.js";async function T({fetch:i,params:e}){const a=`https://api.reddit.com/r/${e.slug}.json`;try{const t=await i(a);if(!t.ok)throw new Error("Response not OK");return{posts:(await t.json()).data.children}}catch(t){throw t}}const Y=Object.freeze(Object.defineProperty({__proto__:null,load:T},Symbol.toStringTag,{value:"Module"}));function M(i,e,a){const t=i.slice();return t[2]=e[a],t}function B(i){let e,a,t;return{c(){e=g("img"),this.h()},l(l){e=b(l,"IMG",{alt:!0,src:!0,class:!0}),this.h()},h(){_(e,"alt",a=i[2].data.title),y(e.src,t=i[2].data.url)||_(e,"src",t),_(e,"class","svelte-o9pss6")},m(l,c){v(l,e,c)},p(l,c){c&1&&a!==(a=l[2].data.title)&&_(e,"alt",a),c&1&&!y(e.src,t=l[2].data.url)&&_(e,"src",t)},d(l){l&&u(e)}}}function F(i){let e,a=i[2].data.secure_media.reddit_video&&N(i);return{c(){a&&a.c(),e=E()},l(t){a&&a.l(t),e=E()},m(t,l){a&&a.m(t,l),v(t,e,l)},p(t,l){t[2].data.secure_media.reddit_video?a?a.p(t,l):(a=N(t),a.c(),a.m(e.parentNode,e)):a&&(a.d(1),a=null)},d(t){t&&u(e),a&&a.d(t)}}}function N(i){let e,a;return{c(){e=g("video"),this.h()},l(t){e=b(t,"VIDEO",{src:!0,class:!0}),k(e).forEach(u),this.h()},h(){e.muted=!0,e.autoplay=!0,e.loop=!0,y(e.src,a=i[2].data.secure_media.reddit_video.fallback_url)||_(e,"src",a),_(e,"class","svelte-o9pss6")},m(t,l){v(t,e,l)},p(t,l){l&1&&!y(e.src,a=t[2].data.secure_media.reddit_video.fallback_url)&&_(e,"src",a)},d(t){t&&u(e)}}}function P(i){let e,a,t,l=i[2].data.title+"",c,h,p,o;function s(f,d){if(f[2].data.secure_media)return F;if(f[2].data.post_hint==="image")return B}let n=s(i),r=n&&n(i);return{c(){e=g("div"),a=g("a"),t=g("h3"),c=j(l),p=w(),r&&r.c(),o=w(),this.h()},l(f){e=b(f,"DIV",{class:!0});var d=k(e);a=b(d,"A",{target:!0,rel:!0,href:!0});var I=k(a);t=b(I,"H3",{class:!0});var q=k(t);c=O(q,l),q.forEach(u),I.forEach(u),p=S(d),r&&r.l(d),o=S(d),d.forEach(u),this.h()},h(){_(t,"class","svelte-o9pss6"),_(a,"target","_blank"),_(a,"rel","noopener noreferrer"),_(a,"href",h=`https://reddit.com/${i[2].data.permalink}`),_(e,"class","post svelte-o9pss6")},m(f,d){v(f,e,d),m(e,a),m(a,t),m(t,c),m(e,p),r&&r.m(e,null),m(e,o)},p(f,d){d&1&&l!==(l=f[2].data.title+"")&&V(c,l),d&1&&h!==(h=`https://reddit.com/${f[2].data.permalink}`)&&_(a,"href",h),n===(n=s(f))&&r?r.p(f,d):(r&&r.d(1),r=n&&n(f),r&&(r.c(),r.m(e,o)))},d(f){f&&u(e),r&&r.d()}}}function J(i){let e,a,t=i[1].params.slug+"",l,c,h,p=H(i[0].posts),o=[];for(let s=0;s<p.length;s+=1)o[s]=P(M(i,p,s));return{c(){e=g("h1"),a=j("r/"),l=j(t),c=w();for(let s=0;s<o.length;s+=1)o[s].c();h=E()},l(s){e=b(s,"H1",{});var n=k(e);a=O(n,"r/"),l=O(n,t),n.forEach(u),c=S(s);for(let r=0;r<o.length;r+=1)o[r].l(s);h=E()},m(s,n){v(s,e,n),m(e,a),m(e,l),v(s,c,n);for(let r=0;r<o.length;r+=1)o[r]&&o[r].m(s,n);v(s,h,n)},p(s,[n]){if(n&2&&t!==(t=s[1].params.slug+"")&&V(l,t),n&1){p=H(s[0].posts);let r;for(r=0;r<p.length;r+=1){const f=M(s,p,r);o[r]?o[r].p(f,n):(o[r]=P(f),o[r].c(),o[r].m(h.parentNode,h))}for(;r<o.length;r+=1)o[r].d(1);o.length=p.length}},i:D,o:D,d(s){s&&(u(e),u(c),u(h)),K(o,s)}}}function L(i,e,a){let t;A(i,R,c=>a(1,t=c));let{data:l}=e;return i.$$set=c=>{"data"in c&&a(0,l=c.data)},[l,t]}class Z extends C{constructor(e){super(),G(this,e,L,J,z,{data:0})}}export{Z as component,Y as universal};
